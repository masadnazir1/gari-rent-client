<div class="add-vehicle-container" *ngIf="!success">
  <h2>Add New Vehicle</h2>

  <form (ngSubmit)="addVehicle()" #f="ngForm">
    <div class="form-grid">
      <div class="form-group">
        <label>Car Name</label>
        <input type="text" name="carName" [(ngModel)]="form.carName" required />
      </div>

      <div class="form-group">
        <label>Select Brand</label>
        <select name="brand_id" [(ngModel)]="form.brand_id" required>
          <option value="" disabled>Select a brand</option>
          <option *ngFor="let b of brands" [value]="b.id">
            {{ b.brand_name }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label>Select Category</label>
        <select name="category_id" [(ngModel)]="form.category_id" required>
          <option value="" disabled>Select a Category</option>
          <option *ngFor="let c of categories" [value]="c.id">
            {{ c.category_name }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label>Transmission</label>
        <select name="transmission" [(ngModel)]="form.transmission">
          <option value="auto">Automatic</option>
          <option value="manual">Manual</option>
        </select>
      </div>

      <div class="form-group">
        <label>Fuel Type</label>
        <select name="fuel" [(ngModel)]="form.fuel">
          <option value="petrol">Petrol</option>
          <option value="diesel">Diesel</option>
          <option value="hybrid">Hybrid</option>
        </select>
      </div>

      <div class="form-group">
        <label>Year</label>
        <select name="year" [(ngModel)]="form.year">
          <option value="">Select Year</option>
          <option
            *ngFor="let y of [].constructor(26); let i = index"
            [value]="2025 - i"
          >
            {{ 2025 - i }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label>Mileage (km)</label>
        <input type="number" name="mileage" [(ngModel)]="form.mileage" />
      </div>

      <div class="form-group">
        <label>Daily Rate (PKR)</label>
        <input type="number" name="daily_rate" [(ngModel)]="form.daily_rate" />
      </div>

      <div class="form-group">
        <label>Badge</label>
        <select name="badge" [(ngModel)]="form.badge">
          <option value="">Select Badge</option>
          <option value="New">New</option>
          <option value="Featured">Featured</option>
          <option value="Premium">Premium</option>
          <option value="Verified">Verified</option>
          <option value="Hot Deal">Hot Deal</option>
          <option value="Limited">Limited</option>
          <option value="Bestseller">Bestseller</option>
          <option value="Certified">Certified</option>
          <option value="Exclusive">Exclusive</option>
          <option value="Top Rated">Top Rated</option>
        </select>
      </div>

      <div class="form-group">
        <label>Select Location</label>
        <select name="location" [(ngModel)]="form.location">
          <option value="rawalpindi">Rawalpindi</option>
          <option value="lahore">Lahore</option>
        </select>
      </div>

      <div class="form-group-select">
        <input type="checkbox" id="ac" [(ngModel)]="form.ac" name="ac" />
        <label for="ac"></label>
        <span class="switch-text">AC Available</span>
      </div>

      <div class="form-group full">
        <label>Description</label>
        <textarea
          name="description"
          [(ngModel)]="form.description"
          rows="3"
        ></textarea>
      </div>

      <div class="form-group full">
        <label>Upload Vehicle Images (Max 10)</label>
        <div class="image-upload-area" (click)="fileInput.click()">
          <fa-icon [icon]="faPlus" size="lg"></fa-icon>
          <p>Click or Drop Images Here</p>
          <input
            type="file"
            multiple
            accept="image/*"
            (change)="onFilesSelected($event)"
            hidden
            #fileInput
          />
        </div>

        <div class="preview-container" *ngIf="previews.length > 0">
          <div
            class="image-preview"
            *ngFor="let img of previews; let i = index"
          >
            <img [src]="img" />
            <button type="button" class="remove-btn" (click)="removeImage(i)">
              <fa-icon [icon]="faTrashAlt"></fa-icon>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" [disabled]="loading">
        {{ loading ? "Adding..." : "Add Vehicle" }}
      </button>
    </div>
  </form>
</div>

<div class="success-container" *ngIf="success">
  <fa-icon [icon]="faCheckCircle" size="10x" />
  <h2>Vehicle Added Successfully</h2>
</div>
