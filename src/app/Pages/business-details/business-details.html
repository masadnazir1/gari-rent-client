<div class="onboard-container">
  <!-- Header -->
  <div class="onboard-header">
    <h2 class="title">Setup Your Business</h2>
    <p class="subtitle">{{ getStepMessage() }}</p>
  </div>

  <!-- Progress -->
  <div class="progress-wrapper">
    <div class="progress-bar">
      <div class="progress-bar-fill" [style.width.%]="progressPercentage"></div>
    </div>

    <div class="progress-steps">
      <div class="step" [class.active]="currentStep >= 1">1</div>
      <div class="step" [class.active]="currentStep >= 2">2</div>
      <div class="step" [class.active]="currentStep >= 3">3</div>
    </div>
  </div>

  <!-- Form -->
  <form *ngIf="currentStep < 4" class="form-area">
    <!-- STEP 1 -->
    <div *ngIf="currentStep === 1" class="step-card animate">
      <h3 class="step-title">Basic Business Info</h3>

      <div class="form-group">
        <label>Business Logo <span>*</span></label>

        <div class="file-upload">
          <input type="file" (change)="onFileChange($event)" accept="image/*" />
        </div>
      </div>

      <div class="form-group">
        <label>Business Name <span>*</span></label>
        <input
          type="text"
          [(ngModel)]="business_name"
          name="business_name"
          placeholder="Ex: CarX Rentals"
        />
      </div>
    </div>

    <!-- STEP 2 -->
    <div *ngIf="currentStep === 2" class="step-card animate">
      <h3 class="step-title">Business Profile</h3>

      <div class="form-group">
        <label>Website URL</label>
        <input
          type="text"
          [(ngModel)]="website_url"
          name="website_url"
          placeholder="https://yourbusiness.com"
        />
      </div>

      <div class="form-group">
        <label>Description</label>
        <textarea
          [(ngModel)]="description"
          name="description"
          placeholder="Tell customers about your business..."
        ></textarea>
      </div>

      <div class="form-group">
        <label>Established Year</label>
        <input
          type="number"
          [(ngModel)]="established_year"
          name="established_year"
          placeholder="2020"
        />
      </div>
    </div>

    <!-- STEP 3 -->
    <div *ngIf="currentStep === 3" class="step-card animate">
      <h3 class="step-title">Compliance & Contact</h3>

      <div class="form-group">
        <label>Registration Number</label>
        <input
          type="text"
          [(ngModel)]="registration_number"
          name="registration_number"
        />
      </div>

      <div class="form-group">
        <label>Tax ID</label>
        <input type="text" [(ngModel)]="tax_id" name="tax_id" />
      </div>

      <div class="form-group">
        <label>Address</label>
        <input type="text" [(ngModel)]="address" name="address" />
      </div>

      <div class="form-group">
        <label>Contact Email</label>
        <input type="email" [(ngModel)]="contact_email" name="contact_email" />
      </div>

      <div class="form-group">
        <label>Contact Phone</label>
        <input type="tel" [(ngModel)]="contact_phone" name="contact_phone" />
      </div>
    </div>

    <!-- Errors -->
    <div *ngIf="errorMessage" class="error-box">
      {{ errorMessage }}
    </div>

    <!-- Actions -->
    <div class="actions">
      <button
        type="button"
        class="btn secondary"
        (click)="prevStep()"
        [disabled]="currentStep === 1"
      >
        Previous
      </button>

      <button
        type="button"
        *ngIf="currentStep < 3"
        class="btn primary"
        (click)="nextStep()"
      >
        Next
      </button>

      <button
        type="button"
        *ngIf="currentStep === 3"
        class="btn primary"
        (click)="submit()"
        [disabled]="submitting"
      >
        {{ submitting ? "Submitting..." : "Submit" }}
      </button>
    </div>
  </form>

  <!-- Success -->
  <div *ngIf="currentStep === 4" class="success-screen animate">
    <img src="/success.svg" class="success-icon" />
    <h3>{{ successMessage }}</h3>
    <p>Your business setup is complete.</p>

    <button (click)="loginTheUser()" class="btn primary large">
      Login Now
    </button>
  </div>
</div>
